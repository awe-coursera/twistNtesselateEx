<html><head>
<title>Checkerboard on Sphere - .jpg checkerboard image used</title>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">

<script type="text/javascript" src="glMatrix-0.js"></script>
<script type="text/javascript" src="webgl-utils.js"></script>
<script type="text/javascript" src="texturedSphere3.js"></script>
<script type="text/javascript" src="guiDriver.js"></script>

<script id="shader-fs" type="x-shader/x-fragment">
    precision mediump float;

    varying vec2 vTextureCoord;
    varying vec3 vLightWeighting;
    uniform sampler2D uSampler;

    void main(void) {
        vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
        gl_FragColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a);
    }
</script>

<script id="shader-vs" type="x-shader/x-vertex">
    attribute vec3 aVertexPosition;
    attribute vec3 aVertexNormal;
    attribute vec2 aTextureCoord;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat3 uNMatrix;

    uniform vec3 uAmbientColor;

    uniform vec3 uLightingDirection;
    uniform vec3 uDirectionalColor;

    uniform bool uUseLighting;

    varying vec2 vTextureCoord;
    varying vec3 vLightWeighting;

    void main(void) {
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        vTextureCoord = aTextureCoord;

        if (!uUseLighting) {
            vLightWeighting = vec3(1.0, 1.0, 1.0);
        } else {
            vec3 transformedNormal = uNMatrix * aVertexNormal;
            float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);
            vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;
        }
    }
</script>

<script type="text/javascript">
     function get_nextsibling(n) {
     	var x;
     	x=n.nextSibling;
     	while (x.nodeType!=1) {
       		x=x.nextSibling;
       	}
     	return x;
     }

    function showValue(self) {
     	get_nextsibling(self).innerHTML=self.value;
    }
</script>

</head>
<body onload="webGLStart();">

<br> This application is a prototype for experimenting with applying textures to
<br> a spere displayed on a WebGL canvas ... using raw WebGL as opposed to more complex libraries such as
<br> Three.js
<br> The sphere is lit (optionally) by ambient lighting and a single diffuse light.
<br> In this example the image texture was obtained from the file "rawimage_16_8_8.jpg"
<br> This was generated by first generating a raw pixel byte array using the C program "checkerboard.c"
<br> The raw image was then converted into a .rgb image using ImageMagick.
<br> The texture co-ordinates are latitude - longitude based
<br> There are buttons for rotating the sphere upwise, downwise, leftwise, rightwise
<br> Each button click will rotate the sphere in the chosen sense by a small fixed increment.
<br> There is also an interface for modifying ambient and diffuse lighting. 
<br>
<br>


<div>
Rotate sphere rightwise:
	<input id="rightRotate" type="button" value="rightRotateMove" onclick="updateModelMatrixRightAndUpdateDisplay()">
</div>
<br>
<div>
Rotate sphere leftwise:
	<input id="leftRotate" type="button" value="leftRotateMove" onclick="updateModelMatrixLeftAndUpdateDisplay()">
</div>
<br>
<div>
Rotate sphere upwise:
	<input id="upRotate" type="button" value="upRotateMove" onclick="updateModelMatrixUpAndUpdateDisplay()">
</div>
<br>
<div>
Rotate sphere downwise:
	<input id="downRotate" type="button" value="downRotateMove" onclick="updateModelMatrixDownAndUpdateDisplay()">
</div>

<br>
<br>


<canvas id="gl-canvas" width="512" height="512">
    Oops ... your browser doesn't support the HTML5 canvas element
</canvas>

<br>
<input id="lighting" checked="checked" type="checkbox"> Use lighting <br>
<br>

    Directional light:

    <table style="border: 0; padding: 10px;">
        <tbody><tr>
            <td>Direction:
            </td><td>X: <input id="lightDirectionX" value="-1.0" type="text">
            </td><td>Y: <input id="lightDirectionY" value="-1.0" type="text">
            </td><td>Z: <input id="lightDirectionZ" value="-1.0" type="text">
        </td></tr>
        <tr>
            <td>Colour:
            </td><td>R: <input id="directionalR" value="0.8" type="text">
            </td><td>G: <input id="directionalG" value="0.8" type="text">
            </td><td>B: <input id="directionalB" value="0.8" type="text">
        </td></tr>
    </tbody></table>


   Ambient light:

    <table style="border: 0; padding: 10px;">
        <tbody><tr>
            <td>Colour:
            </td><td>R: <input id="ambientR" value="0.2" type="text">
            </td><td>G: <input id="ambientG" value="0.2" type="text">
            </td><td>B: <input id="ambientB" value="0.2" type="text">
        </td></tr>
    </tbody></table>
    <br>
</body>
</html>
